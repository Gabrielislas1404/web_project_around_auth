{"ast":null,"code":"import'../index.css';import React from'react';import{useState,useEffect}from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';import api from'../utils/api';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import PopupWithForm from'./PopupWithForm';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isEditAvatarPopupOpen,setIsEditAvatarPopupOpen]=useState(false);const[isEditProfilePopupOpen,setIsEditProfilePopupOpen]=useState(false);const[isAddPlacePopupOpen,setIsAddPlacePopupOpen]=useState(false);const[selectedCard,setSelectedCard]=useState(false);const[cards,setCards]=useState([]);const[cardToDelete,setCardToDelete]=useState({});const[currentUser,setCurrentUser]=useState();const[confirmation,setConfirmation]=useState(false);function handleCardDelete(card){setCardToDelete(card);setConfirmation(true);}function handleCardLike(card){const isLiked=card.likes.some(i=>i._id===currentUser._id);api.likeCard({id:card._id,isLiked:!isLiked}).then(newCard=>{setCards(state=>state.map(c=>c._id===card._id?newCard:c));});}useEffect(()=>{api.getUserInfo().then(data=>setCurrentUser(data));},[]);const handleUpdateUser=_ref=>{let{name,about}=_ref;api.updateUser({name,about}).then(newUserData=>{setCurrentUser(newUserData);setIsEditProfilePopupOpen(false);}).catch(error=>{console.error('Error',error);});};function handleUpdateAvatar(avatar){api.updateAvatar(avatar).then(updateUser=>{setCurrentUser(updateUser);setIsEditAvatarPopupOpen(false);});}const handleAddPlaceSubmit=_ref2=>{let{name,link}=_ref2;api.addCard({name,link}).then(newCard=>{setCards([newCard,...cards]);setIsAddPlacePopupOpen(false);});};function handleCardClick(card){setSelectedCard(card);}const handleEditAvatarClick=()=>{setIsEditAvatarPopupOpen(true);};const handleEditProfileClick=()=>{setIsEditProfilePopupOpen(true);};const handleAddPlaceClick=()=>{setIsAddPlacePopupOpen(true);};const closeAllPopups=()=>{setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard(false);setConfirmation(false);};useEffect(()=>{api.getInitialCards().then(res=>{setCards(res);});},[]);const handleSubmitConfirm=event=>{event.preventDefault();if(cardToDelete){api.deleteCard(cardToDelete._id).then(()=>{setCards(state=>state.filter(c=>c._id!==cardToDelete._id));closeAllPopups();});}};return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:{currentUser},children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditAvatarClick:handleEditAvatarClick,onEditProfileClick:handleEditProfileClick,onAddPlaceClick:handleAddPlaceClick,onCardClick:handleCardClick,onClose:closeAllPopups,cards:cards,selectedCard:selectedCard,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlaceSubmit:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(PopupWithForm,{name:'erase_photo',title:'¿Estás seguro/a?',buttonTitle:'Si',content:'card',buttonClass:'delete',modifier:'delete',isOpen:confirmation,onClose:closeAllPopups,onSubmit:handleSubmitConfirm}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","CurrentUserContext","api","Header","Main","Footer","PopupWithForm","EditProfilePopup","EditAvatarPopup","AddPlacePopup","jsx","_jsx","jsxs","_jsxs","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","selectedCard","setSelectedCard","cards","setCards","cardToDelete","setCardToDelete","currentUser","setCurrentUser","confirmation","setConfirmation","handleCardDelete","card","handleCardLike","isLiked","likes","some","i","_id","likeCard","id","then","newCard","state","map","c","getUserInfo","data","handleUpdateUser","_ref","name","about","updateUser","newUserData","catch","error","console","handleUpdateAvatar","avatar","updateAvatar","handleAddPlaceSubmit","_ref2","link","addCard","handleCardClick","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","getInitialCards","res","handleSubmitConfirm","event","preventDefault","deleteCard","filter","className","children","Provider","value","onEditAvatarClick","onEditProfileClick","onAddPlaceClick","onCardClick","onClose","onCardLike","onCardDelete","isOpen","onUpdateUser","onUpdateAvatar","onAddPlaceSubmit","title","buttonTitle","content","buttonClass","modifier","onSubmit"],"sources":["/Users/gabriel/Documents/Proyectos-TripleTen/Proyecto4/web_project_around_react/src/components/App.js"],"sourcesContent":["import '../index.css';\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport api from '../utils/api';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(false);\n  const [cards, setCards] = useState([]);\n  const [cardToDelete, setCardToDelete] = useState({});\n  const [currentUser, setCurrentUser] = useState();\n  const [confirmation, setConfirmation] = useState(false);\n\n  function handleCardDelete(card) {\n    setCardToDelete(card);\n    setConfirmation(true);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api.likeCard({ id: card._id, isLiked: !isLiked }).then((newCard) => {\n      setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n    });\n  }\n\n  useEffect(() => {\n    api.getUserInfo().then((data) => setCurrentUser(data));\n  }, []);\n\n  const handleUpdateUser = ({ name, about }) => {\n    api\n      .updateUser({ name, about })\n      .then((newUserData) => {\n        setCurrentUser(newUserData);\n        setIsEditProfilePopupOpen(false);\n      })\n      .catch((error) => {\n        console.error('Error', error);\n      });\n  };\n\n  function handleUpdateAvatar(avatar) {\n    api.updateAvatar(avatar).then((updateUser) => {\n      setCurrentUser(updateUser);\n      setIsEditAvatarPopupOpen(false);\n    });\n  }\n\n  const handleAddPlaceSubmit = ({ name, link }) => {\n    api.addCard({ name, link }).then((newCard) => {\n      setCards([newCard, ...cards]);\n      setIsAddPlacePopupOpen(false);\n    });\n  };\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(false);\n    setConfirmation(false);\n  };\n\n  useEffect(() => {\n    api.getInitialCards().then((res) => {\n      setCards(res);\n    });\n  }, []);\n\n  const handleSubmitConfirm = (event) => {\n    event.preventDefault();\n    if (cardToDelete) {\n      api.deleteCard(cardToDelete._id).then(() => {\n        setCards((state) => state.filter((c) => c._id !== cardToDelete._id));\n        closeAllPopups();\n      });\n    }\n  };\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={{ currentUser }}>\n        <Header />\n        <Main\n          onEditAvatarClick={handleEditAvatarClick}\n          onEditProfileClick={handleEditProfileClick}\n          onAddPlaceClick={handleAddPlaceClick}\n          onCardClick={handleCardClick}\n          onClose={closeAllPopups}\n          cards={cards}\n          selectedCard={selectedCard}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n        />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlaceSubmit={handleAddPlaceSubmit}\n        />\n        <PopupWithForm\n          name={'erase_photo'}\n          title={'¿Estás seguro/a?'}\n          buttonTitle={'Si'}\n          content={'card'}\n          buttonClass={'delete'}\n          modifier={'delete'}\n          isOpen={confirmation}\n          onClose={closeAllPopups}\n          onSubmit={handleSubmitConfirm}\n        />\n\n        <Footer />\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}